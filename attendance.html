<!DOCTYPE html>
<html lang="en" class="h-full overflow-hidden">

<!-- ================================================ -->
<!-- HEAD SECTION -->
<!-- ================================================ -->
<head>
    <!-- ============================================ -->
    <!-- META TAGS -->
    <!-- ============================================ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SWAP HRIS - Comprehensive HR Management System Dashboard">
    <meta name="keywords" content="HR, HRIS, Dashboard, Employee Management, Attendance, Leave">
    <meta name="author" content="Ardiansyah Dwi S">
    <meta name="theme-color" content="#2563eb">
    
    <title>Carabao Billiards HR Portal â€” Attendance Management</title>
    
    <!-- ============================================ -->
    <!-- EXTERNAL STYLESHEETS & SCRIPTS -->
    <!-- ============================================ -->
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
          crossorigin="anonymous" 
          referrerpolicy="no-referrer">
    
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- âœ… ADD THIS LINE -->
    <link rel="stylesheet" href="css/tailwind.min.css">

    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- ============================================ -->
    <!-- PAGE-SPECIFIC INLINE STYLES -->
    <!-- ============================================ -->
    <style>
        /* ========================================== */
        /* TAB SYSTEM STYLES */
        /* ========================================== */
        .tab-content { 
            display: none; 
        }
        
        .tab-content.active { 
            display: flex; 
            flex-direction: column; 
            flex: 1; 
        }

        /* ========================================== */
        /* TOOLTIP STYLES */
        /* ========================================== */
        .tooltip-container { 
            position: relative; 
        }
        
        .tooltip-container .tooltip {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 50;
            margin-top: 8px;
            transition: all 0.2s ease;
            pointer-events: none;
        }
        
        .tooltip-container:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .tooltip-container .tooltip::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-bottom-color: #1f2937;
        }
    </style>
</head>

<!-- ================================================ -->
<!-- BODY SECTION -->
<!-- ================================================ -->
<body class="bg-gray-100 h-full overflow-hidden font-['Inter']">

    <!-- ============================================ -->
    <!-- SIDEBAR NAVIGATION -->
    <!-- ============================================ -->
    <aside id="sidebar" 
           class="fixed top-0 left-0 z-40 w-64 h-screen bg-white shadow-lg transform transition-transform duration-300 lg:translate-x-0 -translate-x-full"
           role="navigation"
           aria-label="Main navigation">
        
        <!-- Logo Section -->
        <div class="flex items-center justify-center h-16 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700">
            <div class="flex items-center space-x-3">
                <div class="w-9 h-9 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur">
                    <i class="fas fa-building text-white text-lg" aria-hidden="true"></i>
                </div>
                <span class="text-xl font-bold text-white">Carabao HR Portal</span>
            </div>
        </div>
        
        <!-- Navigation Links -->
        <nav class="mt-6 px-4" aria-label="Sidebar navigation">
            <div class="space-y-1">
                
                <!-- Dashboard -->
                <a href="dashboard.html" 
                   class="sidebar-link flex items-center px-4 py-3 text-gray-600 hover:bg-gray-100 rounded-lg group transition-colors">
                    <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 group-hover:bg-gray-200 mr-3 transition-colors">
                        <i class="fas fa-home text-gray-500" aria-hidden="true"></i>
                    </div>
                    <span class="font-medium">Dashboard</span>
                </a>
                
                <!-- Employees -->
                <a href="employees.html" 
                   class="sidebar-link flex items-center px-4 py-3 text-gray-600 hover:bg-gray-100 rounded-lg group transition-colors">
                    <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 group-hover:bg-gray-200 mr-3 transition-colors">
                        <i class="fas fa-users text-gray-500" aria-hidden="true"></i>
                    </div>
                    <span class="font-medium">Employees</span>
                </a>
                
                <!-- Attendance (Active) -->
                <a href="attendance.html" 
                   class="sidebar-link flex items-center px-4 py-3 text-white bg-primary-600 rounded-lg shadow-md"
                   aria-current="page">
                    <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-white/20 mr-3">
                        <i class="fas fa-clock text-white" aria-hidden="true"></i>
                    </div>
                    <span class="font-medium">Attendance</span>
                </a>
                
                <!-- Leave Management -->
                <a href="leave.html" 
                   class="sidebar-link flex items-center px-4 py-3 text-gray-600 hover:bg-gray-100 rounded-lg group transition-colors">
                    <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 group-hover:bg-gray-200 mr-3 transition-colors">
                        <i class="fas fa-calendar-alt text-gray-500" aria-hidden="true"></i>
                    </div>
                    <span class="font-medium">Leave</span>
                </a>

                <!-- Recruitment -->
                <a href="recruitment.html" 
                   class="sidebar-link flex items-center px-4 py-3 text-gray-600 hover:bg-gray-100 rounded-lg group transition-colors">
                    <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 group-hover:bg-gray-200 mr-3 transition-colors">
                        <i class="fas fa-user-plus text-gray-500" aria-hidden="true"></i>
                    </div>
                    <span class="font-medium">Recruitment</span>
                </a>                
                
                <!-- WhatsApp Blast -->
                <a href="whatsapp-blast.html" 
                   class="sidebar-link flex items-center px-4 py-3 text-gray-600 hover:bg-gray-100 rounded-lg group transition-colors">
                    <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 group-hover:bg-gray-200 mr-3 transition-colors">
                        <i class="fab fa-whatsapp text-gray-500" aria-hidden="true"></i>
                    </div>
                    <span class="font-medium">WhatsApp Blast</span>
                </a>

                <!-- Settings -->
                <a href="settings.html" 
                   class="sidebar-link flex items-center px-4 py-3 text-gray-600 hover:bg-gray-100 rounded-lg group transition-colors">
                    <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 group-hover:bg-gray-200 mr-3 transition-colors">
                        <i class="fas fa-cog text-gray-500" aria-hidden="true"></i>
                    </div>
                    <span class="font-medium">Settings</span>
                </a>
            </div>
            
            <!-- Sidebar Footer - Help Section -->
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
                <div class="flex items-center space-x-3 px-2">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                        <i class="fas fa-headset" aria-hidden="true"></i>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-700">Need Help?</p>
                        <p class="text-xs text-gray-500">Contact Support</p>
                    </div>
                </div>
            </div>
        </nav>
    </aside>

    <!-- Sidebar Overlay (Mobile) -->
    <div id="sidebarOverlay" 
         class="fixed inset-0 bg-black/50 z-30 lg:hidden hidden" 
         onclick="toggleSidebar()"
         aria-label="Close sidebar overlay"></div>

    <!-- ============================================ -->
    <!-- MAIN CONTENT WRAPPER -->
    <!-- ============================================ -->
    <div class="lg:ml-64 h-full flex flex-col overflow-hidden">
        
        <!-- ============================================ -->
        <!-- TOP HEADER BAR -->
        <!-- ============================================ -->
        <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-20">
            <div class="flex items-center justify-between px-4 sm:px-6 py-4">
                
                <!-- Left Section: Mobile Menu & Page Title -->
                <div class="flex items-center space-x-4">
                    <!-- Mobile Menu Toggle Button -->
                    <button id="sidebarToggle" 
                            onclick="toggleSidebar()" 
                            class="lg:hidden text-gray-600 hover:text-gray-900 hover:bg-gray-100 p-2 rounded-lg transition-colors"
                            aria-label="Toggle sidebar"
                            aria-controls="sidebar"
                            aria-expanded="false">
                        <i class="fas fa-bars text-xl" aria-hidden="true"></i>
                    </button>
                    
                    <!-- Page Title & Greeting -->
                    <div>
                        <h1 class="text-xl font-semibold text-gray-800">Attendance Management</h1>
                        <p class="text-sm text-gray-500 hidden sm:block">
                            Manage Carabao Attendance, <span id="currentUserName"></span>! ðŸ‘‹
                        </p>
                    </div>
                </div>
                
                <!-- Right Section: Actions & User Menu -->
                <div class="flex items-center space-x-4">

                    <!-- User Dropdown Menu -->
                    <div class="relative">
                        <button id="userMenuBtn" 
                                onclick="toggleUserDropdown()" 
                                class="flex items-center space-x-3 focus:outline-none hover:bg-gray-50 rounded-lg p-2 transition-colors"
                                aria-label="User menu"
                                aria-haspopup="true"
                                aria-expanded="false">
                            <!-- User Info (Desktop Only) -->
                            <div class="text-right hidden sm:block">
                                <p id="userName" class="text-sm font-medium text-gray-700">Loading...</p>
                                <p id="userRole" class="text-xs text-gray-500">Loading...</p>
                            </div>
                            <!-- User Avatar -->
                            <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center text-white font-semibold shadow-md">
                                <i class="fas fa-user" aria-hidden="true"></i>
                            </div>
                            <!-- Dropdown Icon -->
                            <i class="fas fa-chevron-down text-gray-400 text-xs hidden sm:block" aria-hidden="true"></i>
                        </button>
                        
                        <!-- Dropdown Menu Content -->
                        <div id="userDropdown" 
                             class="hidden absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50"
                             role="menu"
                             aria-labelledby="userMenuBtn">
                            <!-- User Info Header -->
                            <div class="px-4 py-3 border-b border-gray-100">
                                <p class="text-sm font-medium text-gray-900" id="dropdownUserName">User Name</p>
                                <p class="text-xs text-gray-500" id="dropdownUserEmail">user@example.com</p>
                            </div>
                            <!-- Menu Items -->
                            <a href="settings.html" 
                               class="flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 transition-colors"
                               role="menuitem">
                                <i class="fas fa-cog w-5 mr-3 text-gray-400" aria-hidden="true"></i>
                                System Settings
                            </a>
                            <hr class="my-2 border-gray-100" aria-hidden="true">
                            <button onclick="logout()" 
                                    class="flex items-center w-full px-4 py-2.5 text-red-600 hover:bg-red-50 transition-colors"
                                    role="menuitem">
                                <i class="fas fa-sign-out-alt w-5 mr-3" aria-hidden="true"></i>
                                Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- ============================================ -->
        <!-- MAIN CONTENT AREA (IFRAME WRAPPER) -->
        <!-- ============================================ -->
        <main class="flex-1 p-1.5 sm:p-2 overflow-hidden flex flex-col" role="main">
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 flex-1 flex flex-col overflow-hidden">
                
                <!-- ========================================== -->
                <!-- TAB BAR + ACTIONS -->
                <!-- ========================================== -->
                <div class="flex items-center justify-between px-2 sm:px-3 py-1.5 border-b border-gray-100 bg-gray-50/80 flex-shrink-0">
                    
                    <!-- Left: Tab Switcher + Info Tooltip -->
                    <div class="flex items-center space-x-2">
                        <!-- Tab Buttons -->
                        <div class="flex bg-gray-200 rounded-md p-0.5" role="tablist" aria-label="Attendance locations">
                            <!-- Office Tab -->
                            <button id="tabOffice" 
                                    onclick="switchTab('office')" 
                                    class="tab-btn active flex items-center space-x-1.5 px-3 py-1.5 rounded text-xs font-medium bg-primary-600 text-white"
                                    role="tab"
                                    aria-selected="true"
                                    aria-controls="contentOffice">
                                <i class="fas fa-building" aria-hidden="true"></i>
                                <span>Office</span>
                            </button>
                            
                            <!-- Bistro Tab -->
                            <button id="tabBistro" 
                                    onclick="switchTab('bistro')" 
                                    class="tab-btn flex items-center space-x-1.5 px-3 py-1.5 rounded text-xs font-medium text-gray-600 bg-transparent"
                                    role="tab"
                                    aria-selected="false"
                                    aria-controls="contentBistro">
                                <i class="fas fa-utensils" aria-hidden="true"></i>
                                <span>Bistro</span>
                            </button>
                        </div>
                        
                        <!-- Info Tooltip -->
                        <div class="tooltip-container">
                            <button class="w-6 h-6 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center text-xs hover:bg-primary-200 transition-colors"
                                    aria-label="Information about editing permissions"
                                    tabindex="0">
                                <i class="fas fa-info" aria-hidden="true"></i>
                            </button>
                            <div class="tooltip" role="tooltip">For full editing, click "New Tab" and sign in with Google</div>
                        </div>
                    </div>
                    
                    <!-- Right: Action Buttons -->
                    <div class="flex items-center space-x-1.5">
                        <!-- Refresh Button -->
                        <button onclick="refreshIframe()" 
                                class="w-7 h-7 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-200 flex items-center justify-center transition-colors" 
                                title="Refresh"
                                aria-label="Refresh current view">
                            <i class="fas fa-sync-alt text-xs" aria-hidden="true"></i>
                        </button>
                        
                        <!-- Open in New Tab Button -->
                        <button onclick="openInNewTab()" 
                                class="flex items-center space-x-1.5 px-2.5 py-1.5 rounded-md text-xs font-medium text-gray-600 hover:text-primary-600 hover:bg-primary-50 border border-gray-300 hover:border-primary-300 transition-colors" 
                                title="Open in New Tab"
                                aria-label="Open current view in new tab">
                            <i class="fas fa-external-link-alt" aria-hidden="true"></i>
                            <span class="hidden sm:inline">New Tab</span>
                        </button>
                    </div>
                </div>

                <!-- ========================================== -->
                <!-- IFRAME CONTENT AREA -->
                <!-- ========================================== -->
                <div class="flex-1 overflow-hidden relative">
                    
                    <!-- Office Tab Content -->
                    <div id="contentOffice" 
                         class="tab-content active absolute inset-0"
                         role="tabpanel"
                         aria-labelledby="tabOffice">
                        <iframe 
                            id="iframeOffice"
                            src="https://docs.google.com/spreadsheets/d/1bh4vpWeGe8OPUqaqm2AaN83NBIRvcP7AgmT4RTQeeBM/edit?usp=sharing" 
                            class="w-full h-full border-0"
                            title="Office attendance tracking"
                            allow="fullscreen"
                            loading="lazy">
                        </iframe>
                    </div>

                    <!-- Bistro Tab Content -->
                    <div id="contentBistro" 
                         class="tab-content absolute inset-0"
                         role="tabpanel"
                         aria-labelledby="tabBistro">
                        <iframe 
                            id="iframeBistro"
                            src="https://docs.google.com/spreadsheets/d/1bQvQpmTjYWilD1BXMo21I4t8ptAPk0ePg2X67w6ybco/edit?usp=sharing" 
                            class="w-full h-full border-0"
                            title="Bistro attendance tracking"
                            allow="fullscreen"
                            loading="lazy">
                        </iframe>
                    </div>
                </div>
            </div>
        </main>

        <!-- ============================================ -->
        <!-- FOOTER -->
        <!-- ============================================ -->
        <footer class="bg-white border-t border-gray-200 px-6 py-2 flex-shrink-0">
            <div class="flex flex-col sm:flex-row justify-between items-center text-sm text-gray-500">
                <p>Â© 2026 Carabao Billiards Indonesia. All rights reserved.
                    Developed internally by HRD Internship Project.</p>
                <p class="mt-2 sm:mt-0">Version 1.0.0 | Powered by Supabase</p>
            </div>
        </footer>
    </div>

    <!-- ============================================ -->
    <!-- TOAST NOTIFICATION CONTAINER -->
    <!-- ============================================ -->
    <div id="toastContainer" 
         class="fixed bottom-4 right-4 z-[100] space-y-2"
         role="status"
         aria-live="polite"
         aria-atomic="true">
        <!-- Toast notifications will be dynamically injected here by JavaScript -->
    </div>

    <!-- ============================================ -->
    <!-- INLINE JAVASCRIPT (UI INTERACTIONS ONLY) -->
    <!-- ============================================ -->
    <script>
        /**
         * Current active tab identifier
         * @type {string}
         */
        let currentActiveTab = 'office';

        /**
         * Toggle Sidebar (Mobile)
         */
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const toggle = document.getElementById('sidebarToggle');
            
            if (sidebar && overlay) {
                const isHidden = sidebar.classList.contains('-translate-x-full');
                
                sidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
                
                if (toggle) {
                    toggle.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
                }
            }
        }
        
        /**
         * Toggle User Dropdown Menu
         */
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            const btn = document.getElementById('userMenuBtn');
            
            if (dropdown) {
                const isHidden = dropdown.classList.contains('hidden');
                dropdown.classList.toggle('hidden');
                
                if (btn) {
                    btn.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
                }
            }
        }
        
        /**
         * Close Dropdown When Clicking Outside
         */
        document.addEventListener('click', function(event) {
            const userMenuBtn = document.getElementById('userMenuBtn');
            const userDropdown = document.getElementById('userDropdown');
            
            if (userMenuBtn && userDropdown) {
                if (!userMenuBtn.contains(event.target) && !userDropdown.contains(event.target)) {
                    userDropdown.classList.add('hidden');
                    userMenuBtn.setAttribute('aria-expanded', 'false');
                }
            }
        });
        
        /**
         * Show Toast Notification
         * @param {string} message - Notification message
         * @param {string} type - Notification type (success|error|warning|info)
         */
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            if (!container) return;
            
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            
            const toast = document.createElement('div');
            toast.className = `toast flex items-center p-4 rounded-lg shadow-lg text-white ${colors[type] || colors.info} min-w-[300px] animate-slide-in`;
            toast.setAttribute('role', 'alert');
            toast.innerHTML = `
                <i class="fas ${icons[type] || icons.info} mr-3 text-lg" aria-hidden="true"></i>
                <span class="flex-1">${message}</span>
                <button onclick="this.parentElement.remove()" 
                        class="ml-3 hover:opacity-75 transition-opacity"
                        aria-label="Close notification">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 5000);
        }

        /**
         * Logout Function
         */
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                showToast('Logging out...', 'info');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 1000);
            }
        }

        /**
         * Switch Between Office and Bistro Tabs
         * @param {string} tab - Tab identifier ('office' or 'bistro')
         */
        function switchTab(tab) {
            const tabOffice = document.getElementById('tabOffice');
            const tabBistro = document.getElementById('tabBistro');
            const contentOffice = document.getElementById('contentOffice');
            const contentBistro = document.getElementById('contentBistro');
            
            if (!tabOffice || !tabBistro || !contentOffice || !contentBistro) return;

            currentActiveTab = tab;

            if (tab === 'office') {
                tabOffice.classList.add('bg-primary-600', 'text-white', 'active');
                tabOffice.classList.remove('text-gray-600', 'bg-transparent');
                tabOffice.setAttribute('aria-selected', 'true');
                
                tabBistro.classList.remove('bg-primary-600', 'text-white', 'active');
                tabBistro.classList.add('text-gray-600', 'bg-transparent');
                tabBistro.setAttribute('aria-selected', 'false');
                
                contentOffice.classList.add('active');
                contentBistro.classList.remove('active');
            } else {
                tabBistro.classList.add('bg-primary-600', 'text-white', 'active');
                tabBistro.classList.remove('text-gray-600', 'bg-transparent');
                tabBistro.setAttribute('aria-selected', 'true');
                
                tabOffice.classList.remove('bg-primary-600', 'text-white', 'active');
                tabOffice.classList.add('text-gray-600', 'bg-transparent');
                tabOffice.setAttribute('aria-selected', 'false');
                
                contentBistro.classList.add('active');
                contentOffice.classList.remove('active');
            }
        }

        /**
         * Open Active Iframe in New Tab
         */
        function openInNewTab() {
            const activeIframe = currentActiveTab === 'office' 
                ? document.getElementById('iframeOffice') 
                : document.getElementById('iframeBistro');
            
            if (activeIframe && activeIframe.src && activeIframe.src !== '-') {
                window.open(activeIframe.src, '_blank', 'noopener,noreferrer');
            } else {
                showToast('No content loaded yet. Please wait for the iframe to load.', 'warning');
            }
        }

        /**
         * Refresh Active Iframe
         */
        function refreshIframe() {
            const activeIframe = currentActiveTab === 'office' 
                ? document.getElementById('iframeOffice') 
                : document.getElementById('iframeBistro');
            
            if (activeIframe && activeIframe.src && activeIframe.src !== '-') {
                const currentSrc = activeIframe.src;
                activeIframe.src = '';
                setTimeout(() => {
                    activeIframe.src = currentSrc;
                }, 50);
                showToast('Refreshing content...', 'info');
            } else {
                showToast('No content to refresh', 'warning');
            }
        }

        /**
         * Keyboard Accessibility
         */
        document.addEventListener('keydown', function(event) {
            // ESC key closes dropdown
            if (event.key === 'Escape') {
                const userDropdown = document.getElementById('userDropdown');
                const userMenuBtn = document.getElementById('userMenuBtn');
                
                if (userDropdown && !userDropdown.classList.contains('hidden')) {
                    userDropdown.classList.add('hidden');
                    if (userMenuBtn) {
                        userMenuBtn.setAttribute('aria-expanded', 'false');
                    }
                }
            }
            
            // Alt + 1 switches to Office tab
            if (event.altKey && event.key === '1') {
                event.preventDefault();
                switchTab('office');
            }
            
            // Alt + 2 switches to Bistro tab
            if (event.altKey && event.key === '2') {
                event.preventDefault();
                switchTab('bistro');
            }
            
            // Ctrl/Cmd + R refreshes iframe
            if ((event.ctrlKey || event.metaKey) && event.key === 'r') {
                event.preventDefault();
                refreshIframe();
            }
        });
    </script>
    
    <!-- ============================================ -->
    <!-- EXTERNAL JAVASCRIPT DEPENDENCIES -->
    <!-- CRITICAL: Load order must be maintained! -->
    <!-- ============================================ -->
    
    <!-- 1. Supabase Client Library (MUST BE FIRST) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- 2. Core Application (Initializes Supabase) -->
    <script src="js/app.js"></script>
    
    <!-- 3. API Functions (Depends on app.js) -->
    <script src="js/api.js"></script>
    
    <!-- 4. Database Functions (Depends on app.js & api.js) -->
    <script src="js/database-functions.js"></script>
    
    <!-- 5. Utility Functions -->
    <script src="js/utils.js"></script>
    
    <!-- 6. Authentication (Depends on all above) -->
    <script src="js/auth.js"></script>

</body>
</html>